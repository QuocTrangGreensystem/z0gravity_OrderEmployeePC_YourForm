<?php 
$dashboard_icons = array(
	'project' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M15.611,8.778A4.389,4.389,0,1,1,20,4.389,4.394,4.394,0,0,1,15.611,8.778Zm0-7.064a2.675,2.675,0,1,0,2.675,2.675A2.678,2.678,0,0,0,15.611,1.714ZM10.587,9.961h-3a.857.857,0,0,1,0-1.714h3a.857.857,0,1,1,0,1.714Zm-3,3.619a.857.857,0,0,1,0-1.714h3a.857.857,0,1,1,0,1.714Zm1.5-10.041H4.746A3.035,3.035,0,0,0,1.714,6.57v8.684a3.035,3.035,0,0,0,3.031,3.031H13.43a3.028,3.028,0,0,0,3.031-3.031V10.913a.857.857,0,1,1,1.714,0v4.342A4.743,4.743,0,0,1,13.43,20H4.746A4.751,4.751,0,0,1,0,15.254V6.57A4.751,4.751,0,0,1,4.746,1.825H9.087a.857.857,0,0,1,0,1.714Z" transform="translate(2 2)"/></svg>',
	'weather' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs></defs><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M10,8.125V6.25h6V8.125ZM10,2.5h6V4.375H10ZM5.312,20A5.309,5.309,0,0,1,2.5,10.186V2.812a2.813,2.813,0,0,1,5.625,0v7.374A5.309,5.309,0,0,1,5.312,20Zm1.472-8.414a.94.94,0,0,1-.534-.847V2.812a.938.938,0,0,0-1.875,0v7.927a.94.94,0,0,1-.534.847,3.438,3.438,0,1,0,2.943,0Z" transform="translate(4 2)"/></svg>',
	'progress' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M19.063,5.625a.938.938,0,0,1-.938-.937V3.2L13.464,7.862h0L11.6,9.725h0a.936.936,0,0,1-1.325,0h0L5.938,5.388,1.6,9.725h0A.937.937,0,1,1,.275,8.4h0l5-5h0A.936.936,0,0,1,6.6,3.4h0l4.338,4.337,1.2-1.2h0l.093-.093.543-.543h0L16.8,1.875H15.313a.938.938,0,1,1,0-1.875h3.75A.938.938,0,0,1,20,.938v3.75A.938.938,0,0,1,19.063,5.625Z" transform="translate(2 7)"/></svg>',
	'milestone' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="miles-a" width="24" height="24"/><path class="miles-b" d="M2.717,20A2.848,2.848,0,0,1,0,17.043V4.3A2.848,2.848,0,0,1,2.717,1.345H4.189V2.953H2.717A1.265,1.265,0,0,0,1.562,4.3V5.694H18.439V4.3a1.264,1.264,0,0,0-1.156-1.349H15.811V1.345h1.472A2.848,2.848,0,0,1,20,4.3V17.043A2.848,2.848,0,0,1,17.283,20ZM1.562,17.043a1.265,1.265,0,0,0,1.155,1.35H17.283a1.265,1.265,0,0,0,1.156-1.35V7.3H1.562Zm12.313-13.6V.8a.781.781,0,1,1,1.562,0V3.445a.781.781,0,1,1-1.562,0Zm-9.311,0V.8A.781.781,0,1,1,6.125.8V3.445a.781.781,0,1,1-1.561,0ZM6.5,2.953V1.345h7V2.953Z" transform="translate(1.998 2.002)"/><g class="miles-c" transform="translate(5 11)"><rect class="miles-d" width="7" height="8" rx="1"/><rect class="miles-a" x="0.7" y="0.7" width="5.6" height="6.6" rx="0.3"/></g></svg>',
	'program' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M-251.746,762.143V751.309a.865.865,0,0,1,.873-.857.866.866,0,0,1,.873.857v10.834a.866.866,0,0,1-.873.857A.865.865,0,0,1-251.746,762.143Zm-16.259.857A1.952,1.952,0,0,1-270,761.1V744.9a1.952,1.952,0,0,1,1.995-1.9h10.976a1.952,1.952,0,0,1,1.995,1.9v16.2a1.952,1.952,0,0,1-1.995,1.9Zm-.2-18.1v16.2a.2.2,0,0,0,.2.188h10.976a.193.193,0,0,0,.2-.188V744.9a.192.192,0,0,0-.2-.188h-10.976A.194.194,0,0,0-268.2,744.9Zm13.963,17.025V748.977a.958.958,0,0,1,.872-1.025.959.959,0,0,1,.874,1.025v12.951a.959.959,0,0,1-.874,1.025A.958.958,0,0,1-254.24,761.927Zm-11.024-4.726a.879.879,0,0,1-.9-.857.878.878,0,0,1,.9-.857h3.683a.878.878,0,0,1,.9.857.879.879,0,0,1-.9.857Zm-.091-3.344a.878.878,0,0,1-.9-.857.878.878,0,0,1,.9-.856h5.5a.879.879,0,0,1,.9.856.879.879,0,0,1-.9.857Zm0-3.342a.878.878,0,0,1-.9-.857.878.878,0,0,1,.9-.857h5.5a.879.879,0,0,1,.9.857.879.879,0,0,1-.9.857Z" transform="translate(272 -741)"/></svg>',
	'project_manager' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><g transform="translate(2 2)"><path class="svg-b" d="M1.623,44.536c.388-3.464,1.526-5.171,3.806-5.711a.834.834,0,0,0,.052-1.6,3.69,3.69,0,0,1,1.052-7.2,3.69,3.69,0,0,1,1.052,7.2.834.834,0,0,0,.052,1.6c2.279.539,3.419,2.248,3.806,5.711a.818.818,0,0,0,.9.73.826.826,0,0,0,.717-.918c-.243-2.169-.862-5-3.289-6.439A5.366,5.366,0,0,0,6.533,28.36a5.366,5.366,0,0,0-3.239,9.548C.867,39.347.248,42.18,0,44.347a.826.826,0,0,0,.717.918.888.888,0,0,0,.093.005A.819.819,0,0,0,1.623,44.536Z" transform="translate(0 -25.271)"/><path class="b" d="M94.982,9.549A5.348,5.348,0,0,0,96.988,5.34,5.3,5.3,0,0,0,91.743,0a5.215,5.215,0,0,0-3.877,1.744.841.841,0,0,0,.053,1.172.8.8,0,0,0,1.151-.054,3.593,3.593,0,0,1,2.673-1.2A3.653,3.653,0,0,1,95.36,5.34,3.651,3.651,0,0,1,92.8,8.863a.834.834,0,0,0,.052,1.6c2.28.539,3.418,2.248,3.806,5.711a.82.82,0,0,0,.809.735.888.888,0,0,0,.093-.005.826.826,0,0,0,.717-.918C98.029,13.82,97.409,10.987,94.982,9.549Z" transform="translate(-78.278)"/></g></svg>',
	'sun' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.sun-a{fill:none;}.sun-b{fill:#ee8845;fill-rule:evenodd;}</style></defs><rect class="sun-a" width="24" height="24"/><path class="sun-b" d="M19.143,10.857H17.429a.857.857,0,0,1,0-1.714h1.714a.857.857,0,0,1,0,1.714ZM16.32,4.891a.857.857,0,0,1-1.212-1.212l1.143-1.143a.857.857,0,1,1,1.212,1.212ZM10,16a6,6,0,1,1,6-6A6.007,6.007,0,0,1,10,16ZM10,5.714A4.286,4.286,0,1,0,14.286,10,4.29,4.29,0,0,0,10,5.714Zm0-2.286a.857.857,0,0,1-.857-.857V.857a.857.857,0,1,1,1.714,0V2.571A.857.857,0,0,1,10,3.429ZM4.286,5.143a.855.855,0,0,1-.606-.251L2.537,3.749A.857.857,0,0,1,3.749,2.537L4.891,3.679a.857.857,0,0,1-.606,1.463ZM3.429,10a.857.857,0,0,1-.857.857H.857a.857.857,0,1,1,0-1.714H2.571A.857.857,0,0,1,3.429,10Zm.251,5.108A.857.857,0,1,1,4.891,16.32L3.749,17.463a.857.857,0,0,1-1.212-1.212ZM10,16.571a.857.857,0,0,1,.857.857v1.714a.857.857,0,0,1-1.714,0V17.429A.857.857,0,0,1,10,16.571Zm5.714-1.714a.854.854,0,0,1,.606.251l1.143,1.143a.857.857,0,1,1-1.212,1.212L15.108,16.32a.857.857,0,0,1,.606-1.463Z" transform="translate(2 2)"/></svg>',
	'cloud' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.cloud-a{fill:none;}.cloud-b{fill:#79b2da;fill-rule:evenodd;}</style></defs><rect class="cloud-a" width="24" height="24"/><path class="cloud-b" d="M19.268,9.257H17.8a.773.773,0,0,1,0-1.543h1.463a.773.773,0,0,1,0,1.543Zm-2.9-4.341a.709.709,0,0,1-.517.226.752.752,0,0,1-.732-.771.793.793,0,0,1,.214-.546L16.312,2.8a.713.713,0,0,1,.518-.226.752.752,0,0,1,.732.771.788.788,0,0,1-.215.545Zm-1.576,6.74a3.353,3.353,0,0,1,1.791,3A3.26,3.26,0,0,1,13.415,18H3.659A3.761,3.761,0,0,1,0,14.143a3.884,3.884,0,0,1,1.967-3.418A5.242,5.242,0,0,1,7.073,5.657,4.852,4.852,0,0,1,8.6,5.912a4.073,4.073,0,0,1,3.347-1.8A4.264,4.264,0,0,1,16.1,8.486,4.46,4.46,0,0,1,14.795,11.657ZM7.073,7.2a3.749,3.749,0,0,0-3.646,3.619l-.05.87-.732.4a2.326,2.326,0,0,0-1.181,2.05,2.26,2.26,0,0,0,2.2,2.314h9.756a1.757,1.757,0,0,0,1.707-1.8A1.8,1.8,0,0,0,14.071,13l-.9-.4V11.571a2.249,2.249,0,0,0-2.122-2.309l-.68-.023-.421-.564A3.575,3.575,0,0,0,7.073,7.2Zm4.878-1.543a2.61,2.61,0,0,0-1.993.949A5.291,5.291,0,0,1,11.1,7.721,3.653,3.653,0,0,1,14.267,9.9a2.9,2.9,0,0,0,.367-1.41A2.762,2.762,0,0,0,11.951,5.657Zm0-2.571a.752.752,0,0,1-.732-.771V.771a.733.733,0,1,1,1.463,0V2.314A.752.752,0,0,1,11.951,3.086Zm-3.9,2.057a.711.711,0,0,1-.518-.226L6.556,3.888a.79.79,0,0,1-.214-.545.753.753,0,0,1,.732-.771A.711.711,0,0,1,7.59,2.8l.976,1.029a.791.791,0,0,1,.215.546A.753.753,0,0,1,8.049,5.143Z" transform="translate(2 3)"/></svg>',
	'rain' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.rain-a{fill:none;}.rain-b{fill:#f05352;fill-rule:evenodd;}</style></defs><rect class="rain-a" width="24" height="24"/><path class="rain-b" d="M16.176,14.4a.9.9,0,0,1,0-1.8,2.107,2.107,0,0,0,.792-4.039L15.882,8.1V6.9a2.661,2.661,0,0,0-2.559-2.693L12.5,4.18l-.508-.658A4.359,4.359,0,0,0,8.529,1.8a4.452,4.452,0,0,0-4.4,4.222L4.072,7.036l-.883.472A2.708,2.708,0,0,0,4.412,12.6a.9.9,0,0,1,0,1.8A4.456,4.456,0,0,1,0,9.9,4.508,4.508,0,0,1,2.372,5.912,6.225,6.225,0,0,1,8.529,0,6.117,6.117,0,0,1,13.38,2.408,4.456,4.456,0,0,1,17.647,6.9a3.913,3.913,0,0,1-1.471,7.5ZM7.353,10.2a.891.891,0,0,1,.882.9v1.2a.883.883,0,1,1-1.765,0V11.1A.891.891,0,0,1,7.353,10.2Zm0,3.6a.891.891,0,0,1,.882.9v1.2a.883.883,0,1,1-1.765,0V14.7A.891.891,0,0,1,7.353,13.8Zm2.941-2.4a.891.891,0,0,1,.882.9v1.2a.883.883,0,1,1-1.765,0V12.3A.891.891,0,0,1,10.294,11.4Zm0,3.6a.891.891,0,0,1,.882.9v1.2a.883.883,0,1,1-1.765,0V15.9A.891.891,0,0,1,10.294,15Zm2.941-4.8a.891.891,0,0,1,.882.9v1.2a.883.883,0,1,1-1.765,0V11.1A.891.891,0,0,1,13.235,10.2Zm0,3.6a.891.891,0,0,1,.882.9v1.2a.883.883,0,1,1-1.765,0V14.7A.891.891,0,0,1,13.235,13.8Z" transform="translate(2 3)"/></svg>',
	'setting' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M19.874,11.507a.857.857,0,0,1-.56.68l-1.576.56c-.092.264-.2.521-.315.769l.716,1.509a.855.855,0,0,1-.084.874,9.959,9.959,0,0,1-2.146,2.146.853.853,0,0,1-.875.084l-1.508-.717c-.249.117-.506.222-.77.316L12.195,19.3a.854.854,0,0,1-.676.56A9.848,9.848,0,0,1,10,19.99a9.848,9.848,0,0,1-1.519-.127A.854.854,0,0,1,7.8,19.3l-.561-1.575c-.264-.094-.521-.2-.77-.316l-1.508.717a.853.853,0,0,1-.875-.084A9.959,9.959,0,0,1,1.945,15.9a.855.855,0,0,1-.084-.874l.716-1.509a8.2,8.2,0,0,1-.315-.769l-1.576-.56a.857.857,0,0,1-.56-.68A9.876,9.876,0,0,1,0,9.991,9.879,9.879,0,0,1,.126,8.473a.857.857,0,0,1,.56-.678l1.576-.56a8.061,8.061,0,0,1,.315-.769L1.861,4.957a.857.857,0,0,1,.084-.876A9.981,9.981,0,0,1,4.091,1.936a.853.853,0,0,1,.875-.084l1.509.717a7.869,7.869,0,0,1,.769-.316L7.8.677a.858.858,0,0,1,.676-.56,9.115,9.115,0,0,1,3.038,0,.858.858,0,0,1,.676.56l.561,1.576a8.021,8.021,0,0,1,.77.316l1.508-.717a.854.854,0,0,1,.875.084,9.981,9.981,0,0,1,2.146,2.145.857.857,0,0,1,.084.876l-.716,1.509a8.2,8.2,0,0,1,.315.769l1.576.56a.855.855,0,0,1,.56.678A9.879,9.879,0,0,1,20,9.991,9.876,9.876,0,0,1,19.874,11.507ZM18.245,9.234l-1.479-.526a.853.853,0,0,1-.535-.565,6.426,6.426,0,0,0-.517-1.257.86.86,0,0,1-.021-.777l.671-1.41a8.357,8.357,0,0,0-1.073-1.072l-1.41.67a.85.85,0,0,1-.777-.02,6.463,6.463,0,0,0-1.257-.517.857.857,0,0,1-.564-.535l-.526-1.479a6.957,6.957,0,0,0-1.512,0L8.717,3.225a.857.857,0,0,1-.564.535A6.463,6.463,0,0,0,6.9,4.277a.854.854,0,0,1-.778.02l-1.41-.67A8.356,8.356,0,0,0,3.636,4.7l.671,1.41a.86.86,0,0,1-.021.777,6.5,6.5,0,0,0-.517,1.258.854.854,0,0,1-.535.563l-1.479.527a6.955,6.955,0,0,0,0,1.513l1.479.525a.858.858,0,0,1,.535.565,6.421,6.421,0,0,0,.517,1.257.862.862,0,0,1,.021.778l-.671,1.409a8.366,8.366,0,0,0,1.072,1.073l1.41-.671A.854.854,0,0,1,6.9,15.7a6.463,6.463,0,0,0,1.257.517.854.854,0,0,1,.564.535l.526,1.478a6.958,6.958,0,0,0,1.512,0l.526-1.478a.854.854,0,0,1,.564-.535A6.463,6.463,0,0,0,13.1,15.7a.858.858,0,0,1,.777-.021l1.41.67a8.277,8.277,0,0,0,1.073-1.072l-.671-1.409a.862.862,0,0,1,.021-.778,6.453,6.453,0,0,0,.517-1.257.858.858,0,0,1,.535-.565l1.479-.525a6.966,6.966,0,0,0,0-1.514ZM10,13.757A3.968,3.968,0,1,1,13.969,9.79,3.973,3.973,0,0,1,10,13.757Zm0-6.222A2.254,2.254,0,1,0,12.254,9.79,2.257,2.257,0,0,0,10,7.535Z" transform="translate(2 2.01)"/></svg>',
	'moving' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M10,12V10h2v2ZM5,12V10H7v2ZM0,12V10H2v2ZM10,7V5h2V7ZM5,7V5H7V7ZM0,7V5H2V7ZM10,2V0h2V2ZM5,2V0H7V2ZM0,2V0H2V2Z" transform="translate(6 6)"/></svg>',
	'ok' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g transform="translate(-325 -75)"><rect class="svg-a" width="40" height="40" transform="translate(317 66)"></rect><path class="svg-b" d="M9.791,1.412h0L4.314,7.757h0a.648.648,0,0,1-1.01,0h0L.209,4.171h0A.9.9,0,0,1,0,3.585a.777.777,0,0,1,.714-.827A.668.668,0,0,1,1.219,3h0l2.59,3L8.781.242h0A.668.668,0,0,1,9.285,0,.778.778,0,0,1,10,.827.9.9,0,0,1,9.791,1.412Z" transform="translate(332 82.001)"></path></g></svg>',
	'phase' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M-1280.284,1084a2.848,2.848,0,0,1-2.717-2.957V1068.3a2.848,2.848,0,0,1,2.717-2.957h1.472v1.608h-1.472a1.265,1.265,0,0,0-1.155,1.349v1.392h16.877V1068.3a1.265,1.265,0,0,0-1.156-1.349h-1.472v-1.608h1.472A2.848,2.848,0,0,1-1263,1068.3v12.741a2.848,2.848,0,0,1-2.717,2.957Zm-1.155-2.957a1.266,1.266,0,0,0,1.155,1.349h14.566a1.265,1.265,0,0,0,1.156-1.349V1071.3h-16.877Zm12.313-13.6V1064.8a.794.794,0,0,1,.781-.8.794.794,0,0,1,.781.8v2.642a.793.793,0,0,1-.781.8A.793.793,0,0,1-1269.125,1067.445Zm-9.311,0V1064.8a.793.793,0,0,1,.781-.8.794.794,0,0,1,.781.8v2.642a.793.793,0,0,1-.781.8A.793.793,0,0,1-1278.436,1067.445Zm1.935-.492v-1.608h7v1.608Z" transform="translate(1285 -1062)"/></svg>',
	'calculate' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.calcu-a,.calcu-b{fill:none;}.calcu-b{stroke:#bcbcbc;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.4px;}.calcu-c{fill:#bcbcbc;}.calcu-d{stroke:none;}</style></defs><rect class="calcu-a" width="24" height="24"/><g class="calcu-b" transform="translate(4 2)"><rect class="calcu-d" width="16" height="20" rx="2"/><rect class="calcu-a" x="0.7" y="0.7" width="14.6" height="18.6" rx="1.3"/></g><g class="calcu-b" transform="translate(7 5)"><rect class="calcu-d" width="10" height="5" rx="1"/><rect class="calcu-a" x="0.7" y="0.7" width="8.6" height="3.6" rx="0.3"/></g><path class="calcu-c" d="M16845.7,21992.4a.7.7,0,0,1,0-1.4h2.6a.7.7,0,0,1,0,1.4Zm-6,0a.7.7,0,0,1,0-1.4h2.605a.7.7,0,0,1,0,1.4Z" transform="translate(-16832.004 -21979.398)"/><path class="calcu-c" d="M16845.7,21992.4a.7.7,0,0,1,0-1.4h2.6a.7.7,0,0,1,0,1.4Zm-6,0a.7.7,0,0,1,0-1.4h2.605a.7.7,0,0,1,0,1.4Z" transform="translate(-16832.004 -21976.398)"/><path class="calcu-c" d="M16845.7,21992.4a.7.7,0,0,1,0-1.4h2.6a.7.7,0,0,1,0,1.4Zm-6,0a.7.7,0,0,1,0-1.4h2.605a.7.7,0,0,1,0,1.4Z" transform="translate(-16832.004 -21973.398)"/></svg>',
	'tasks' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.a{fill:none;}.b{fill:#7b7b7b;fill-rule:evenodd;}</style></defs><rect class="a" width="24" height="24"/><path class="b" d="M13.581,19.87a.893.893,0,0,1-.857.031L7,17.03,1.277,19.9A.9.9,0,0,1,.42,19.87.854.854,0,0,1,0,19.138V5.342A2.628,2.628,0,0,1,2.655,2.748h8.691A2.628,2.628,0,0,1,14,5.342v13.8A.853.853,0,0,1,13.581,19.87ZM12.247,5.342a.892.892,0,0,0-.9-.881H2.655a.892.892,0,0,0-.9.881V17.735L6.6,15.3a.9.9,0,0,1,.8,0l4.847,2.431ZM10.284,1.71H3.716A.867.867,0,0,1,2.84.853.867.867,0,0,1,3.716,0h6.568a.867.867,0,0,1,.877.857A.867.867,0,0,1,10.284,1.71Z" transform="translate(5 2.004)"/></svg>',
	'delete' => '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><g transform="translate(-317 -66)"><rect class="svg-a" width="14" height="14" transform="translate(317 66)"></rect><path transform="translate(606.5 1788)" d="M-287.4-1709.767a.62.62,0,0,1,0-.876l3.942-3.942-3.942-3.943a.619.619,0,0,1,0-.876.619.619,0,0,1,.876,0l3.943,3.943,3.943-3.943a.619.619,0,0,1,.876,0,.619.619,0,0,1,0,.876l-3.942,3.943,3.942,3.942a.62.62,0,0,1,0,.876.62.62,0,0,1-.876,0l-3.943-3.943-3.943,3.943a.618.618,0,0,1-.438.182A.618.618,0,0,1-287.4-1709.767Z" class="svg-b"></path></g></svg>',
	'edit' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M67.355,294.392a.962.962,0,0,1-.926-1.228l1.7-5.96a.955.955,0,0,1,.245-.416l11.5-11.5a3.075,3.075,0,0,1,4.342,0l1.278,1.278a3.071,3.071,0,0,1,0,4.342L74,292.408a.958.958,0,0,1-.415.245l-5.961,1.7A.982.982,0,0,1,67.355,294.392Zm1.4-2.366,4.053-1.158,8.935-8.935-2.9-2.895-8.934,8.934Zm14.351-11.455,1.022-1.021a1.145,1.145,0,0,0,0-1.617l-1.278-1.279a1.148,1.148,0,0,0-1.618,0l-1.022,1.023Z" transform="translate(-64.392 -272.395)"/></svg>',
	'add' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.a{fill:none;}.b{fill:#7b7b7b;}</style></defs><rect class="a" width="24" height="24"/><path class="b" d="M17925,19762v-8h-8a1,1,0,1,1,0-2h8v-8a1,1,0,1,1,2,0v8h8a1,1,0,1,1,0,2h-8v8a1,1,0,1,1-2,0Z" transform="translate(-17914 -19741)"/></svg>',
	'ok' => '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><g transform="translate(-317 -66)"><rect class="svg-a" width="14" height="14" transform="translate(317 66)" ></rect><path class="svg-fill-green" d="M9.791,1.412h0L4.314,7.757h0a.648.648,0,0,1-1.01,0h0L.209,4.171h0A.9.9,0,0,1,0,3.585a.777.777,0,0,1,.714-.827A.668.668,0,0,1,1.219,3h0l2.59,3L8.781.242h0A.668.668,0,0,1,9.285,0,.778.778,0,0,1,10,.827.9.9,0,0,1,9.791,1.412Z" transform="translate(319 69)" ></path></g></svg>',
	'pen' => '<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 20 20">
		<path id="EDIT" class="svg-b" d="M6593.86,260.788c-0.75.767-11.93,11.826-12.4,12.3a0.7,0.7,0,0,1-.27.157c-0.75.224-5.33,1.7-5.37,1.719a0.693,0.693,0,0,1-.2.03,0.625,0.625,0,0,1-.44-0.184,0.636,0.636,0,0,1-.16-0.642c0.01-.044,1.37-4.478,1.64-5.477a0.627,0.627,0,0,1,.16-0.285s11.99-12,12.34-12.343a3.636,3.636,0,0,1,2.42-1.056,3.186,3.186,0,0,1,2.23.981,3.347,3.347,0,0,1,1.18,2.356A3.455,3.455,0,0,1,6593.86,260.788Zm-17.36,12.665c1.21-.39,3.11-1.045,3.97-1.322a3.9,3.9,0,0,0-.94-1.565,4.037,4.037,0,0,0-1.78-1.087C6577.46,270.444,6576.85,272.274,6576.5,273.453Zm3.92-3.789a4.95,4.95,0,0,1,1.07,1.6c2.23-2.2,7.88-7.791,10.33-10.231a3.894,3.894,0,0,0-1.02-1.875,3.944,3.944,0,0,0-1.84-1.1c-2.41,2.409-8.16,8.167-10.37,10.372A5.418,5.418,0,0,1,6580.42,269.664Zm12.51-12.755a1.953,1.953,0,0,0-1.35-.63,2.415,2.415,0,0,0-1.53.69c-0.01.011-.06,0.055-0.09,0.09a5.419,5.419,0,0,1,1.73,1.194,5.035,5.035,0,0,1,1.14,1.763,1.343,1.343,0,0,0,.12-0.119,2.311,2.311,0,0,0,.78-1.534A2.168,2.168,0,0,0,6592.93,256.909Z" transform="translate(-6575 -255)"></path>
	</svg>', 
	'estimated' => '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect class="svg-a" width="24" height="24"/><path class="svg-b" d="M9,0C4.037,0,0,1.963,0,4.375v11.25C0,18.037,4.037,20,9,20s9-1.963,9-4.375V4.375C18,1.963,13.963,0,9,0ZM9,1.875c4.666,0,7.072,1.752,7.072,2.5S13.666,6.875,9,6.875s-7.071-1.752-7.071-2.5S4.335,1.875,9,1.875Zm7.072,13.75c0,.748-2.406,2.5-7.072,2.5s-7.071-1.752-7.071-2.5V12.7A13.938,13.938,0,0,0,9,14.375,13.945,13.945,0,0,0,16.072,12.7ZM9,12.5c-4.665,0-7.071-1.752-7.071-2.5V7.073A13.938,13.938,0,0,0,9,8.75a13.945,13.945,0,0,0,7.072-1.677V10C16.072,10.748,13.666,12.5,9,12.5Z" transform="translate(3 2)"/></svg>',
	'eye' => '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect class="svg-a" width="16" height="16"/><path class="svg-b" d="M7,11.2C3.133,11.2.389,7.6,0,5.6.389,3.6,3.133,0,7,0s6.611,3.6,7,5.6C13.611,7.6,10.867,11.2,7,11.2Zm0-10c-3.053,0-5.324,2.777-5.8,4.4C1.676,7.224,3.947,10,7,10s5.324-2.776,5.8-4.4C12.324,3.977,10.053,1.2,7,1.2ZM7,8A2.367,2.367,0,0,1,4.667,5.6a2.334,2.334,0,1,1,4.666,0A2.367,2.367,0,0,1,7,8ZM7,4.4A1.2,1.2,0,1,0,8.167,5.6,1.185,1.185,0,0,0,7,4.4Z" transform="translate(1 2)"/></svg>',
	'eye_close' => '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect class="svg-a" width="16" height="16"/><path class="svg-b" d="M4.293,13.431a.7.7,0,0,1-.257-.956l.376-.651A8.018,8.018,0,0,1,0,6.781,7.431,7.431,0,0,1,2.2,3.23,7.04,7.04,0,0,1,7,1.181a6.449,6.449,0,0,1,3.093.8L11.037.35a.7.7,0,0,1,1.212.7l-7,12.125a.7.7,0,0,1-.956.256ZM1.2,6.781a6.991,6.991,0,0,0,3.813,4L6.056,8.976a2.408,2.408,0,0,1-1.39-2.2A2.37,2.37,0,0,1,7,4.38a2.284,2.284,0,0,1,1.423.5L9.5,3.017A5.327,5.327,0,0,0,7,2.381C3.85,2.381,1.635,5.294,1.2,6.781Zm4.631,0a1.2,1.2,0,0,0,.828,1.148l1.156-2A1.154,1.154,0,0,0,7,5.581,1.185,1.185,0,0,0,5.833,6.781Zm1.274,5.6v0l.733-1.268A6.894,6.894,0,0,0,12.8,6.781a6.035,6.035,0,0,0-1.24-2.109L12.175,3.6A7.133,7.133,0,0,1,14,6.781,7.406,7.406,0,0,1,11.838,10.3,7.081,7.081,0,0,1,7.109,12.38Z" transform="translate(1 1)"/></svg>',
);
$company_employees = array();
foreach( $listEmployeeName as $id => $data){
	if( !empty( $data['company_id']) && empty( $data['is_pc'])) $company_employees[$id] = $data['fullname'];
}
if( !function_exists('multiSelect')){
	function multiSelect($_this, $fieldName, $fielData, $textHolder, $pc = ''){	
		ob_start();
		?>
		<div class="wd-multiselect multiselect multiselect-<?php echo $fieldName ;?> " id="multiselect_<?php echo $fieldName ;?>">
			<a href="javascript:void(0);" class="wd-combobox wd-project-manager">
				<p class="placeholder">
					<?php echo $textHolder;?>
				</p>
			</a>
			<div class="wd-combobox-content <?php echo $fieldName ;?>" style="display: none;">
				<div class="context-menu-filter"><span><input type="text" class="wd-input-search" placeholder="<?php __('Search');?>" rel="no-history"></span></div>
				<div class="option-content">
						<?php 
						foreach($fielData as $idPm => $namePm){
							$avatar = '<img src="' . $_this->UserFile->avatar($idPm) . '" alt="'. $namePm .'"/>';
							?>
							<div class="projectManager wd-data-manager wd-group-<?php echo $idPm ;?>">
								<p class="projectManager wd-data">
									<?php 
									echo $_this->Form->input($fieldName, array(
										'label' => false,
										'div' => false,
										'type' => 'checkbox',
										'name' => 'data['. $fieldName .'][]',
										'value' => $idPm,
										'id' => 'ProjectProjectEmployeeManager'.$idPm,
									)) ;?>
										
									<span class="option-name" style="padding-left: 5px;"><?php echo $namePm;?> </span>
								</p>
							</div>
						<?php }
						if(!empty($pc)){
							foreach($pc as $idPm => $namePm){
								?>
								<div class="projectManager wd-data-manager wd-group-<?php echo $idPm ;?>">
									<p class="projectManager wd-data">
										<?php echo  $_this->Form->input($fieldName, array(
												'label' => false,
												'div' => false,
												'type' => 'checkbox',
												'name' => 'data['. $fieldName .'][]',
												'value' => $idPm . '-1'
											));						
										?>
										<span class="option-name" style="padding-left: 5px;"><?php echo  $namePm;?></span>
									</p>
								</div>
							<?php }
						};
				?></div>
			</div>
		</div>
		<?php return ob_get_clean();
	}
}
echo $this->Html->script(array(
	'projects_dashboard.js?ver=1.6',
));
echo $this->Html->css(array(
	'preview/project_widgets.css?ver=1.3'
));
$list_select_yourform = array(
	'project_amr_program_id',
	'project_status_id',
	'project_priority_id',
	'team',
	'list_1',
	'list_2',
	'list_3',
	'list_4',
	'list_5',
	'list_6',
	'list_7',
	'list_8',
	'list_9',
	'list_10',
	'list_11',
	'list_12',
	'list_13',
	'list_14',
	'list_15',
	'project_type_id',
	'project_sub_type_id',
	'project_sub_sub_type_id',
	'complexity_id',
	'budget_customer_id',
	'project_phase_id',
	'list_muti_1',
	'list_muti_2',
	'list_muti_3',
	'list_muti_4',
	'list_muti_5',
	'list_muti_6',
	'list_muti_7',
	'list_muti_8',
	'list_muti_9',
	'list_muti_10',
);
// field yes/no 
$list_yesno_yourform = array(
	'yn_1',
	'yn_2',
	'yn_3',
	'yn_4',
	'yn_5',
	'yn_6',
	'yn_7',
	'yn_8',
	'yn_9'
);
// field array number_x, price_x
$list_number_yourform = array(
	'price_1',
	'price_2',
	'price_3',
	'price_4',
	'price_5',
	'price_6',
	'price_7',
	'price_8',
	'price_9',
	'price_10',
	'price_11',
	'price_12',
	'price_13',
	'price_14',
	'price_15',
	'price_16',
	'number_1',
	'number_2',
	'number_3',
	'number_4',
	'number_5',
	'number_6',
	'number_7',
	'number_8',
	'number_9',
	'number_10',
	'number_11',
	'number_12',
	'number_13',
	'number_14',
	'number_15',
	'number_16',
	'number_17',
	'number_18'
);
$list_multiselect_yourform = array(
	'project_phase_id',
	'list_muti_1',
	'list_muti_2',
	'list_muti_3',
	'list_muti_4',
	'list_muti_5',
	'list_muti_6',
	'list_muti_7',
	'list_muti_8',
	'list_muti_9',
	'list_muti_10',
);
$list_plan_capacity = array(
	'plan_capacity_1',
	'plan_capacity_2',
	'plan_capacity_3',
	'plan_capacity_4',
	'plan_capacity_5',
	'plan_capacity_6',
	'plan_capacity_7',
	'plan_capacity_8',
	'plan_capacity_9',
	'plan_capacity_10'
);
// $plan_capacity = array();
foreach(  $list_plan_capacity as $index => $wg_id){
	$dash_widgets[$wg_id] = __('Planed capacity', true);
}
$all_widget_default = array(
	'upper'=> array(
		'dash_count_projects' => array(
			'key' => 'count_projects',
			'classes' => '',
			'id' => 'count_projects',
			'icon' => $dashboard_icons['project'],
			'title' => __('Projects', true),
			'data' => '',
		),
		'dash_list_weather' => array(
			'key' => 'list_weather',
			'classes' => '',
			'id' => 'list_weather',
			'icon' => $dashboard_icons['weather'],
			'title' => __('Weather', true),
			'data' => '',
		),
		'dash_sum_progress' => array(
			'key' => 'sum_progress',
			'classes' => '',
			'id' => 'sum_progress',
			'icon' => $dashboard_icons['progress'],
			'title' => __('Progress', true),
			'data' => '',
		),
		'dash_count_tasks' => array(
			'key' => 'count_tasks',
			'classes' => '',
			'id' => 'count_tasks',
			'icon' => $dashboard_icons['tasks'],
			'title' => __('Tasks', true),
			'data' => '',
		),
	),
	'lower'=> array(
		'dash_progress_chart' => array(
			'key' => 'progress_chart',
			'classes' => '',
			'id' => 'progress_chart',
			'icon' => $dashboard_icons['progress'],
			'title' => __('Progress', true),
			'data' => '',
		),
		'dash_progress_tasks' => array(
			'key' => 'progress_tasks_late',
			'classes' => 'dash-item-medium',
			'id' => 'progress_tasks_late',
			'icon' => $dashboard_icons['tasks'],
			'title' => __('Tasks late', true),
			'data' => '',
		),
		'dash_progress_all_tasks' => array(
			'key' => 'progress_task',
			'classes' => 'dash-item-medium',
			'id' => 'progress_task',
			'icon' => $dashboard_icons['tasks'],
			'title' => __('Tasks', true),
			'data' => '',
		),
	),
);
$progress_method = isset($companyConfigs['project_progress_method'] ) ? $companyConfigs['project_progress_method'] : '';
if( $progress_method == 'no_progress') {
	unset( $all_widget_default['upper']['dash_sum_progress']);
	unset( $all_widget_default['lower']['dash_progress_chart']);
}
$i = 2;
$dash_widgets['ProjectWidget.FinancePlusinv'] = __d(sprintf($_domain, 'Budget_Investment'), 'Budget Investment',true);
$dash_widgets['ProjectWidget.FinancePlusfon'] = __d(sprintf($_domain, 'Budget_Operation'), 'Budget Operation',true);
$dash_widgets['ProjectWidget.FinancePlusfinanfon'] = __d(sprintf($_domain, 'Finance_Operation'), 'Finance Operation',true);
$dash_widgets['ProjectWidget.FinancePlusfinaninv'] = __d(sprintf($_domain, 'Finance_Investment'), 'Finance Investment',true);
foreach( $dash_widgets as $k => $name){
	if( strpos($k, '.')){
		$k = explode('.', $k);
		$k = $k[1];
	}
	$k = strtolower($k);
	switch( $k){
		case 'milestone':
			$all_widget_default['lower']['dash_late_milestones'] = array(
				'key' => 'list_late_milestones',
				'classes' => 'dash-item-medium',
				'id' => 'list_late_milestones',
				'icon' => $dashboard_icons['milestone'],
				'title' => __('Late milestone', true),
				'data' => '',
			);
			$all_widget_default['lower']['dash_next_milestones'] = array(
				'key' => 'list_next_milestones',
				'classes' => 'dash-item-medium',
				'id' => 'list_next_milestones',
				'icon' => $dashboard_icons['milestone'],
				'title' => __('Next milestone', true),
				'data' => '',
			);
			break;
		case 'phase':
			$all_widget_default['lower']['dash_phase'] = array(
				'key' => 'dash_phase',
				'classes' => 'dash-item-medium',
				'id' => 'dash_phase',
				'icon' => $dashboard_icons['phase'],
				'title' => $name,
				'data' => '',
			);
			break;
		case 'internalbudgeteuro':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_internalbudgeteuro'] = array(
					'key' => 'dash_internalbudgeteuro',
					'classes' => 'dash-item-medium',
					'id' => 'dash_internalbudgeteuro',
					'icon' => $dashboard_icons['calculate'],
					'title' => $name .' '. $budget_settings,
					'data' => '',
				);
			}
			break;
		case 'internalbudgetmd':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_internalbudgetmd'] = array(
					'key' => 'dash_internalbudgetmd',
					'classes' => 'dash-item-medium',
					'id' => 'dash_internalbudgetmd',
					'icon' => $dashboard_icons['calculate'],
					'title' => $name .' '. $budget_settings,
					'data' => '',
				);
			}
			break;
		case 'external_cost'://working
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_external_cost'] = array(
					'key' => 'dash_external_cost',
					'classes' => 'dash-item-medium',
					'id' => 'dash_external_cost',
					'icon' => $dashboard_icons['calculate'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'finance_plus':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_finance_plus'] = array(
					'key' => 'dash_finance_plus',
					'classes' => 'dash-item-medium',
					'id' => 'dash_finance_plus',
					'icon' => $dashboard_icons['calculate'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'financeplusinv':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_'.$k] = array(
					'key' => 'dash_'.$k,
					'classes' => 'dash-item-medium',
					'id' => 'dash_'.$k,
					'icon' => $dashboard_icons['program'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'financeplusfon':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_'.$k] = array(
					'key' => 'dash_'.$k,
					'classes' => 'dash-item-medium',
					'id' => 'dash_'.$k,
					'icon' => $dashboard_icons['program'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'financeplusfinanfon':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_'.$k] = array(
					'key' => 'dash_'.$k,
					'classes' => 'dash-item-medium',
					'id' => 'dash_'.$k,
					'icon' => $dashboard_icons['program'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'financeplusfinaninv':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_'.$k] = array(
					'key' => 'dash_'.$k,
					'classes' => 'dash-item-medium',
					'id' => 'dash_'.$k,
					'icon' => $dashboard_icons['program'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'synthesis':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_'.$k] = array(
					'key' => 'dash_'.$k,
					'classes' => 'dash-item-medium',
					'id' => 'dash_'.$k,
					'icon' => $dashboard_icons['program'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'externalbudget':
			if( $canSeeBudget ){
				$all_widget_default['lower']['dash_'.$k] = array(
					'key' => 'dash_'.$k,
					'classes' => 'dash-item-medium',
					'id' => 'dash_'.$k,
					'icon' => $dashboard_icons['program'],
					'title' => $name,
					'data' => '',
				);
			}
			break;
		case 'project_manager_id':
			$all_widget_default['lower']['dash_project_managers'] = array(
				'key' => 'dash_project_managers',
				'classes' => 'dash-item-medium',
				'id' => 'dash_project_managers',
				'icon' => $dashboard_icons['project_manager'],
				'title' => __d(sprintf($_domain, 'Details'), 'Project Manager', true),
				'data' => '',
			);
			break;
		case 'weather':
			break;
		default:
			if( in_array($k, $list_select_yourform)){ // Translate "Details"
				// Vi name cua input trung voi name cua filter nen phai rename: them dash cho input cua dashboard
				// Add a 'dash_' prefix because of the same name as the filter's input
				$k = 'dash_'.$k;
				$all_widget_default['lower'][$k] = array(
					'key' => $k,
					'classes' => 'dash-item-medium',
					'id' => $k,
					'icon' => $dashboard_icons['program'],
					'title' => __d(sprintf($_domain, 'Details'), $name, true),
					'data' => '',
					);
			}elseif(in_array($k, $list_yesno_yourform)){
				$k = 'dash_'.$k;
				$all_widget_default['lower'][$k] = array(
					'key' => $k,
					'classes' => 'dash-item-medium',
					'id' => $k,
					'icon' => $dashboard_icons['program'],
					'title' => __d(sprintf($_domain, 'Details'), $name, true),
					'data' => '',
				);
			}elseif(in_array($k, $list_number_yourform)){
				$k = 'dash_'.$k;
				$all_widget_default['lower'][$k] = array(
					'key' => $k,
					'classes' => 'dash-item-medium',
					'id' => $k,
					'icon' => $dashboard_icons['calculate'],
					'title' => __d(sprintf($_domain, 'Details'), $name, true),
					'data' => '',
				);
			}elseif(in_array($k, $list_plan_capacity)){
				$k = 'dash_'.$k;
				$all_widget_default['lower'][$k] = array(
					'key' => $k,
					'classes' => 'dash-item-medium',
					'id' => $k,
					'icon' => $dashboard_icons['estimated'],
					'title' => $name,
					'data' => '',
				);
				
			}else{
				$k = 'dash_'.$k;
				$all_widget_default['lower'][$k] = array(
					'key' => $k,
					'classes' => 'dash-item-medium',
					'id' => $k,
					'icon' => $dashboard_icons['program'],
					'title' => __($name, true),
					'data' => '',
				);
			}
	}
}
$headband_titles = array(
	'upper' => __('Upper headband', true),
	'lower' => __('Lower headband', true),
	);
$enable_widget = array();
$dashboard_history = array();
if (!function_exists('array_key_first')) {
    function array_key_first(array $arr) {
        foreach($arr as $key => $unused) {
            return $key;
        }
        return NULL;
    }
}
if( !empty( $dashboard_histories)){
	if( !empty($dashboard_histories['acti'])){
		$active_id = $dashboard_histories['acti'];
		$dashboard_history =  !empty($dashboard_histories[$active_id]) ? $dashboard_histories[$active_id] : $dashboard_histories[array_key_first($dashboard_histories)];
	}else{
		$dashboard_history = $dashboard_histories[array_key_first($dashboard_histories)];
	}
	$dashboard_history = $dashboard_history['dashboard_data'];
}
if( empty( $dashboard_history['display'])){
	// foreach( $all_widget_default as $row => $widgets){
		// $enable_widget = array_merge( $enable_widget, array_keys($widgets));
	// }
}else{
	foreach( $all_widget_default as $row => $widgets){
		foreach( $widgets as $wg_name => $wg_setting){
			if( in_array($wg_name, $dashboard_history['display']) ) 
				$enable_widget[] = $wg_name;
		}
	}
}
// Order lại list widget theo history 
$all_widget = array(
	'upper' => array(),
	'lower' => array()
);
if( empty( $dashboard_history['order'])){
	$all_widget = $all_widget_default;
}else{
	$_widgets = $all_widget_default;
	foreach( $all_widget_default as $row => $widgets){
		if( !empty($dashboard_history['order'][$row]) && is_array($dashboard_history['order'][$row])){
			foreach ($dashboard_history['order'][$row] as $or => $widget_name){
				if( isset( $_widgets[$row][$widget_name] )){
					$all_widget[$row][$widget_name] = $_widgets[$row][$widget_name];
					unset($_widgets[$row][$widget_name]);
				}
			}
			$all_widget[$row] += $_widgets[$row];
		}else{
			$all_widget[$row] = $_widgets[$row];
		}

	}
	unset($_widgets);
}
if( empty( $dashboard_history)) {
	$dashboard_history = array(
		'name' => __('Dashboard', true) . ' ' . 1,
		'order' => $all_widget,
		'display' => $enable_widget
	);
}
// debug($employee_info ); exit;
if( empty( $dashboard_histories)) {
	$dashboard_histories[0] = array(
		'dashboard_data' => $dashboard_history,
		'employee_id' => $employee_info['Employee']['id'],
		'company_id' => $employee_info['Company']['id'],
	);
	$dashboard_histories['acti'] = 0;	
}

// END Order lại list widget theo history 
// debug( $dashboard_histories); exit;
$style = '';
// debug( $container_width); exit;
if( !empty( $container_width)){
	$style = 'style="width: '. ($container_width + 100) . 'px; max-width:100%;"';
}
?>
<?php if( empty($canShareDashboard)){?>
<style>
	.dash_multi_dashboard_select .button_share{
		display: none !important;
	}
</style>
<?php } ?> 
<div class="projects-dashboard-container" <?php echo $style;?>>
<div class="projects-dashboard-setting orderable">
	<a href="javascript:void(0);" class="dashboard-setting-toggle" id="dashboard-setting-toggle"><?php echo $dashboard_icons['setting'];?></a>
	<div class="dash-setting-inner">
		<?php echo $this->Form->create('Dashboard', array(
			'url' => $this->Html->url('/projects/save_dashboard_history'),
			'id' => 'dashboard-setting',
			'inputDefaults' =>  array(
				'label' => false,
				'div'   => false,
			)
		));
		?>
		<div class="scroll-container">
			<?php 
			foreach( $all_widget as $row => $widgets){
				$headband_title = $headband_titles[$row];
				echo "<div class='setting-block {$row}-headband' data-row='{$row}'>";
				echo "<p class='headband-title'>{$headband_title}</p>";
				?>
				<div class="headband-content sortable-container">
					<?php foreach ($widgets as $widget_name => $wg_setting){
						echo "<div class='wd-custom-select-list wd-orderable {$widget_name}'>";
						echo $this->Form->input($widget_name, array(
							'type' => 'checkbox',
							'class' => 'hidden dash-widget-enable',
							'name' => $widget_name,
							'rel' => 'no-history',
							'checked' => in_array($widget_name, $enable_widget),
							));
						echo $this->Form->label($widget_name, $dashboard_icons['moving'] . '<span>' . strip_tags($wg_setting['title']) .'</span><span class="svg-right">'. $dashboard_icons['ok'] . '</span>' );
						echo "</div>";
					} ?> 

				</div>
				<?php echo "</div>";

			}?>
		</div>
		<div class="wd-submit">
			<a href="javascript:void(0);" type="submit" class="btn-form-action btn-ok btn-fullwidth" id="dashBtnSave"><span><?php __('Save');?> </span></a>
		</div>

		<?php echo $this->Form->end();
		?>
	</div>
	<?php if( !empty($multi_dashboard_container)){ 
		$def_name = __('Dashboard', true);
		$i = 0;
		// debug ($def_name); exit;
		$acti_dash_key = isset($dashboard_histories['acti']) ? $dashboard_histories['acti'] : 0;
		// debug ($acti_dash_key); exit;
	?> 
		<div class="dash_multi_dashboard_select" style="display: none;">
			<div class="wd-dropdown dashboard_select_dropdown">
				<input type="hidden" class="dashboard_selectd wd-dropdown-seleted" rel="no-history" value="<?php echo $acti_dash_key;?>"/>
				<span class="selected">
					<?php echo isset( $dashboard_history['name']) ? $dashboard_history['name'] : ($def_name . ' ' . ($i+1))  ;?>
				</span>
				<span class="wd-caret"></span>
				<ul class="popup-dropdown">
					<?php foreach( $dashboard_histories as $k => $_dash){
						if( $k === 'acti') continue;
						$dash = $_dash['dashboard_data'];
						$name = isset( $dash['name']) ? $dash['name'] : ($def_name . ' ' . ($i+1));
						$class = 'dashboard-item dashboard-item-' . $k;
						$class .= ($k == $acti_dash_key) ? ' active' : '';
						$my_dashboard = ($_dash['employee_id'] == $employee_info['Employee']['id']);
						?>
						<li class="<?php echo $class;?>" data-value="<?php echo $k;?>">
							<a href="javascript:void(0);" class="<?php echo $class;?>" data-text="<?php echo $name;?>" data-value="<?php echo $k;?>"><?php echo $name;?></a>
							<?php if( $my_dashboard){?>
								<span class="button_edit" ><?php echo $dashboard_icons['edit'];?></span>
							<?php } ?> 
							<input type="text" class="wd-hide input_edit" value="<?php echo $name;?>" data-key="<?php echo $k;?>" />
							<?php if( $my_dashboard){?>
								<span class="button_ok wd-hide" ><?php echo $dashboard_icons['ok'];?></span>
								<span class="button_share button_share_nobody <?php echo ($_dash['share_type'] == 'nobody') ? '' : 'wd-hide';?>"><?php echo $dashboard_icons['eye_close']?></span>
								<span class="button_share button_share_resource <?php echo ($_dash['share_type'] != 'nobody') ? '' : 'wd-hide';?>"><?php echo $dashboard_icons['eye']?></span>
								<span class="button_delete" href="javascript: void(0);"><?php echo $dashboard_icons['delete'];?></span>
							<?php } ?> 
						</li>
						
						<?php $i++;
					}?>
						<li class="dash_add_new"<?php if( $i > 9) echo ' style="display:none;"'?>>
							<span class="dashboard-item dashboard-item-holder" data-text="<?php echo $def_name . ' ' . ($i+1);?>"  data-value="">&nbsp;</span>
							<input type="text" class="dash_add_new wd-hide input_edit" value="<?php echo $def_name . ' ' . ($i+1);?>" data-key="" />
							<span class="button_edit" ><?php echo $dashboard_icons['add'];?></span>
							<span class="button_ok wd-hide" ><?php echo $dashboard_icons['ok'];?></span>
							<!-- <span class="button_share button_share_nobody wd-hide'"><?php echo $dashboard_icons['eye_close']?></span> -->
							<!-- <span class="button_share button_share_resource wd-hide"><?php echo $dashboard_icons['eye']?></span> -->
							<!-- <span class="button_delete"><?php echo $dashboard_icons['delete'];?></span> -->
						</li>						
				</ul>
			</div>
		</div>
	<?php }else{
		$multi_dashboard_container = '';
	} 
	// ob_clean();
	// debug($list_plan_capacity);
	// exit;
	?> 

	</div>
</div>
<div class="wd-dashboard-share wd-hide">
	<div id="dialog-share-dashboard" class="dialog-share-dashboard dialog-popup" style="display: none;">
		<span class="dialog-title wd-hide"><?php echo __('Who can view?', true);?></span>
		<?php echo $this->Form->create('ProjectDashboard', array(
			'type' => 'POST', 
			'id' => 'ProjectDashboard', 
			'url' => array('controller' => 'project_dashboards', 'action' => 'update_share')
		));
		echo $this->Form->input('id', array(
			'id' => 'share_dashboard_id',
			'type' => 'hidden',
			'value' => '0',
		));
		?>
		<?php $share_types = array(
			'everybody'	=> __("Everybody", true),
			'nobody'	=> __("Nobody", true), 
			'resource'	=> __("Select a resource", true)
		); ?>
		<ul class="share_types">
		<?php foreach ($share_types as $share_type => $share_name){ ?>
			<li class="share_type">
				<div class="radioselect radio_share_type">
					<div class="input wd-input wd-radiocheck-button">
						<input type="radio" style="display:none;" rel="no-history" value="<?php echo $share_type;?>" name="data[ProjectDashboard][share_type]" id="ProjectDashboardShareType-<?php echo $share_type;?>"/>
						<label for="ProjectDashboardShareType-<?php echo $share_type;?>"><span class="wd-radiocheckbox-input"></span><?php echo $share_name;?>
						</label>
					</div>
				</div>
				<?php if($share_type == 'resource'){ ?>
					<div class="wd-input wd-area wd-none select-share_resource">
						<?php 	
						echo multiSelect($this, 'share_resource', $company_employees, '');
						?>
					</div>
				<?php } ?> 
			</li>
		<?php  } ?>
		</ul>
		<?php echo $this->Form->end(); ?>
	</div>
</div>
<script>
var dashboard_timeout = 2000;
var list_select_yourform = <?php echo json_encode($list_select_yourform);?>;
var list_yesno_yourform = <?php echo json_encode($list_yesno_yourform);?>;
var multi_dashboard_container = <?php echo json_encode($multi_dashboard_container);?>;
var dashboard_icons = <?php echo json_encode($dashboard_icons);?>;
var company_employees = <?php echo json_encode($company_employees);?>;
var Dashboard = {};
init_multiselect('.multiselect-share_resource', {empty: true});
var year_current = <?php echo json_encode(date('m/Y', time()));?>;
var Dashboard = new ProjectsDashboard($('.projects-dashboard-container'), {
	display: false,
	'projectIds': <?php echo json_encode($projectIds);?>,
	'enable_widget': <?php echo json_encode($enable_widget);?>,
	'all_widget': <?php echo json_encode($all_widget);?>,
	'list_select_yourform': <?php echo json_encode($list_select_yourform);?>,
	'list_yesno_yourform': <?php echo json_encode($list_yesno_yourform);?>,
	'list_number_yourform': <?php echo json_encode($list_number_yourform);?>,
	'list_multiselect_yourform': <?php echo json_encode($list_multiselect_yourform);?>,
	'list_plan_capacity': <?php echo json_encode($list_plan_capacity);?>,
	'multi_dashboard_container': <?php echo json_encode($multi_dashboard_container);?>,
	'sumActivities': <?php echo json_encode($sumActivities);?>,
	'dashboard_histories': <?php echo json_encode($dashboard_histories);?>,
	'all_widget_default': <?php echo json_encode($all_widget_default);?>,
	'share_popup': '#dialog-share-dashboard',
	'current_employee': <?php echo json_encode($employee_info['Employee']['id']);?>,
	'ready': false,
	'before_init' : function(dashboard){
		if( typeof dashboard_before_init == 'function' ){
			if( typeof dashboard_timeout != 'undefined'){
				setTimeout( function(){ 
					dashboard_before_init(dashboard);
				}, dashboard_timeout);
			}else{
				dashboard_before_init(dashboard);
			} 
		}
		else return '';
	}
});
Dashboard.def_name = "<?php __('Dashboard');?>";
function dashboard_before_init(dashboard){
	if( !dashboard.ready ){
		var fields = [];
		$.each( dashboard.all_widget, function( r, wgs){
			$.each( wgs, function( k, wg_setting){
				fields.push(k);
			});
		});
		if( dashboard.display){
			dashboard.el.css('overflow', 'hidden');
			dashboard.el.height(300).addClass('loading-mark loading');
		}
		setTimeout( function(){
			$.ajax({
				url: '/projects/get_data_dashboard',
				type: 'post',
				dataType: 'json',
				async: false,
				data: {data:{
					fields: fields,
					projectIds: dashboard.projectIds,
				}},
				success: function(res){
					if( res.result == 'success'){
						// update to current data
						if( !dashboard.data) dashboard.data = {};
						$.each( res.data, function( k,v){
							dashboard.data[k] = v;
						});
						dashboard.el.css('height', '');
						dashboard.ready = true;
						dashboard.drawAll();
					}else{
						dashboard.el.remove();
					}
					
				},
				complete: function(){
					dashboard.el.css('overflow', '');
					setTimeout( function(){
						lazy_widget_progress_line(dashboard);
					}, 1500);
				}
			});
		}, 10);
	}
	return true;
}
function lazy_widget_progress_line(dashboard){
	$.ajax({
		type: 'POST',
		url: '/projects/get_dash_widget_progress_line',
		data: { data:{
			projectIds: projectIds,
		}},
		dataType: "json",
		success: function (data) {
			// console.log( data);
			if( data.result == 'success'){
				dashboard.data.dataset_internals = data.data.dataset_internals;
				dashboard.data.dataset_externals = data.data.dataset_externals;
				dashboard.data.syns_progress_keys = data.data.syns_progress_keys;
			}else{
				dashboard.data.dataset_internals = {};
				dashboard.data.dataset_externals = {};
				dashboard.data.syns_progress_keys = {};
			}
			if( Dashboard.display){
				Dashboard.refresh_widget_progress_line();
			}
		}
	});
}
function display_dashboard(){
	// Dashboard.display = true;
	Dashboard.refresh();
}
function multiselect_share_resourceonChange (elm){
	var _this = $(elm);
	if( _this.hasClass('disabled')  || _this.hasClass('waiting')){
		return;
	}
	Dashboard.has_change = true;
}
</script>